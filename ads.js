var videoContent=document.getElementById("contentElement");var adDisplayContainer=new google.ima.AdDisplayContainer(document.getElementById("adContainer"),videoContent);adDisplayContainer.initialize();var adsLoader=new google.ima.AdsLoader(adDisplayContainer);adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,onAdsManagerLoaded,false);adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,onAdError,false);function onAdError(b){console.log("adError");document.getElementById("adContainer").style.display="none";var e=__require("GameConfig");if(e.playNum==0){adCompleteFlag=true;if(adCompleteFlag&&resCompleteFlag){adCompleteFlag=false;var d=e.launchScene;var c=e.Bros;var a=e.caS;cc.director.loadScene(d,null,function(){adCompleteFlag=false;if(c){a="";var g=document.getElementById("GameDiv");if(g){g.style.backgroundImage=""}}cc.loader.onProgress=null;console.log("Success to load scene: "+d)})}}adEndComplete=true;if(adEndComplete&&resEndComplete){adEndComplete=false;console.log("indexOverErr");var f=__require("MainManage");f.showGameEndLayer()}console.log(b.getError());adsManager.destroy()}var contentEndedListener=function(){adsLoader.contentComplete()};videoContent.onended=contentEndedListener;var preloader=new google.ima.AdsRequest();preloader.adTagUrl="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8708616103041212&description_url=http%3A%2F%2Fwww.vsane.com&videoad_start_delay=-1&hl=zh_CN&max_ad_duration=15000";preloader.linearAdSlotWidth=640;preloader.linearAdSlotHeight=400;preloader.nonLinearAdSlotWidth=640;preloader.nonLinearAdSlotHeight=400;function showMyAds(){if(typeof(killads)=="undefined"){console.log("AdNo");adEndComplete=false;var b=__require("MainManage");b.showGameEndLayer()}else{var a=document.documentElement.clientHeight;if(document.body.clientHeight>700){document.getElementById("adContainer").style.height=a-85+"px"}else{document.getElementById("adContainer").style.height=a-65+"px"}document.getElementById("adContainer").style.display="block";adsLoader.requestAds(preloader)}}function onAdsManagerLoaded(c){console.log("ADLoad");adCompleteFlag=true;adsManager=c.getAdsManager(videoContent);adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,onAdError);adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,onContentPauseRequested);adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,onContentResumeRequested);var e=document.getElementById("adContainer");var b=e.offsetHeight;var a=e.offsetWidth;try{adsManager.init(a,b,google.ima.ViewMode.FULLSCREEN);adsManager.start()}catch(d){}}function onContentPauseRequested(){videoContent.removeEventListener("ended",contentEndedListener);videoContent.pause()}function onContentResumeRequested(){console.log("ADLoadComplete",resEndComplete);var d=__require("GameConfig");console.log("IndexMainManger",d.launchScene,d.Bros,d.caS);if(d.playNum==1){adCompleteFlag=true;if(adCompleteFlag&&resCompleteFlag){var c=d.launchScene;var b=d.Bros;var a=d.caS;cc.director.loadScene(c,null,function(){adCompleteFlag=false;if(b){var f=document.getElementById("GameCanvas");f.style.visibility="";var g=document.getElementById("GameDiv");if(g){g.style.backgroundImage=""}}cc.loader.onProgress=null;console.log("Success to load scene1: "+c)})}}adEndComplete=true;if(adEndComplete&&resEndComplete){adEndComplete=false;console.log("indexOverErr");var e=__require("MainManage");e.showGameEndLayer()}document.getElementById("adContainer").style.display="none"}function noAdGoToScene(){var d=__require("GameConfig");console.log("IndexMainMangerMaing",d.launchScene,d.Bros,d.caS);var c=d.launchScene;var b=d.Bros;var a=d.caS;cc.director.loadScene(c,null,function(){adCompleteFlag=false;if(b){var e=document.getElementById("GameCanvas");e.style.visibility="";var f=document.getElementById("GameDiv");if(f){f.style.backgroundImage=""}}cc.loader.onProgress=null;console.log("Success to load scene1Main: "+c)})};